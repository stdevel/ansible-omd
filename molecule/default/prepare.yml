---
- name: Prepare
  hosts: all
  gather_facts: false
  tasks:
    - name: Install python for Ansible
      raw: test -e /usr/bin/python || (apt -y update && apt install -y python-minimal)
      become: true
      changed_when: false
      when: ansible_facts["os_family"] == "Debian"
    - name: Install python for Ansible
      raw: test -e /usr/bin/python || (yum update -y && yum install -y python)
      become: true
      changed_when: false
      when: ansible_facts["os_family"] == "RedHat"
